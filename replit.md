# 부동산 매물 플랫폼

## 프로젝트 개요
한국어 부동산 임대 매물 등록 및 관리 플랫폼입니다. 보증금/월세/관리비 형태의 한국 부동산 가격 체계를 지원하며, 다국어 번역, 휴지통 기능, 관리자 인증 등의 기능을 제공합니다.

## 최근 변경사항 (2025-07-16)
- ✅ **지도 페이지 실제 Google Maps 적용**
  - 가짜 시뮬레이션을 실제 Google Maps iframe으로 교체
  - 서울 동작구 (대방동, 상도동, 신길동) 중심 지도 표시
  - 매물 상세와 동일한 iframe 방식 사용 (API 키 불필요)
  - 지역별 매물 수량 정보 오버레이 추가

## 이전 변경사항 (2025-07-11)
- ✅ **로그인 시스템 문제 완전 해결**
  - **PostgreSQL 세션 스토어 연결**: connect-pg-simple로 세션 데이터베이스 저장
  - **apiRequest 함수 수정**: 매개변수 순서 불일치 문제 해결
  - **인증 상태 실시간 새로고침**: useAuth 훅에서 staleTime 0으로 설정
  - **메인 화면 하트 버튼 개선**: 크기를 더 크게(h-8 w-8), 배경 투명도 향상
  - **사용자 인사말 표시**: 로그인 후 "ㅇㅇㅇ님 안녕하세요" 정상 표시
  - **관심 매물 기능 완전 작동**: 메인 화면과 상세 페이지에서 하트 클릭 가능
- ✅ **회원가입 시스템 대폭 개선 (플로팅 모달 → 전용 페이지)**
  - **모바일 UX 개선**: 플로팅 모달에서 별도 페이지(/signup)로 변경
  - **가상키보드 문제 해결**: 모바일에서 스크롤 가능, 입력 필드 접근성 향상
  - **비밀번호 확인 기능**: 비밀번호 재입력 필드 추가, 일치 여부 실시간 검증
  - **개인정보 동의 시스템**: 필수 체크박스 2개 (개인정보 수집·이용, 이용약관)
  - **이용약관 모달**: 스크롤 가능한 약관 전문 팝업 (kbbuddy2025@gmail.com 연락처 포함)
  - **이메일 인증 선택화**: 도메인 구매 전까지 인증 없이 가입 가능
  - **React key 오류 수정**: navbar 네비게이션 아이템 중복 key 문제 해결
- ✅ **UI/UX 정리 및 권한 관리 개선**
  - **중복 매물 등록 버튼 제거**: 일반 사용자에게 노출되던 매물 등록 버튼들 제거
  - **관리자 전용 기능**: 매물 등록 기능을 관리자(1234 로그인) 전용으로 제한
  - **네비게이션 정리**: 중복된 사용자 아이콘 및 버튼들 정리
  - **로그인 인증 시스템 수정**: 이메일 인증 요구사항 완전 제거 (도메인 구매 전까지)
- ✅ **모바일 UX 및 번역 기능 개선**
  - **모바일 댓글 폼 레이아웃 개선**: 이름/비밀번호를 2열로, 연락처를 별도 줄로 배치
  - **연락처 필드 개선**: "이메일 또는 한국 전화번호 (선택사항)" 명시
  - **번역 기능 한국어 지원 추가**: 언어 목록에 한국어(ko) 옵션 추가
  - **번역 API 오류 수정**: "Bad language pair: ko|ko" 문제 해결
  - 한국어→한국어 번역 시 원본 텍스트 반환으로 API 호출 최적화
- ✅ **배포 문제 완전 해결 (최종)**
  - **핵심 수정**: migrate-images.ts에서 직접 실행 시 process.exit(0) 호출 제거
  - 서버 시작 중 마이그레이션 스크립트가 프로세스를 종료시키는 문제 해결
  - 이미지 마이그레이션은 API 엔드포인트(/api/migrate-images)를 통해서만 실행
  - **프론트엔드 표시 문제 해결**: 루트 경로(/)를 프론트엔드용으로 복원
  - 헬스체크 엔드포인트: /health와 /api/health 정상 작동
  - 서버 준비 상태 관리로 헬스체크 정확성 향상
  - **1초 시작 지연 추가**: 모든 초기화 완료 후 헬스체크 활성화
  - **강화된 헬스체크 로깅**: 업타임, 상태 추적으로 배포 이슈 디버깅 개선
  - 포트/호스트 바인딩 개선 (환경변수 지원)
  - 강화된 에러 처리 및 Graceful shutdown
  - **배포 준비 완료**: 프론트엔드 표시 및 모든 헬스체크 엔드포인트 정상 작동 확인
- ✅ **관리자 UX 대폭 개선**
  - 관리자 로그인 후 모든 기능에 비밀번호 재입력 없이 접근 가능
  - 관리자 패널에서 모든 메뉴 직접 접근 (새 매물, 휴지통, 문의관리, 카테고리)
  - 관리자 메모 기능으로 문의별 내부 메모 작성/수정
  - 메모 저장 피드백 개선 (성공/실패 토스트 메시지)
- ✅ **댓글 시스템 구현 완료**
  - 댓글 작성/수정/삭제 기능 추가
  - 4자리 숫자 비밀번호로 댓글 수정 권한 관리
  - 관리자 전용 댓글 기능 (체크박스)
  - 댓글 수정 시간 표시
  - 관리자는 모든 댓글 삭제 가능
- ✅ **관리자 로그인 시스템 구현**
  - AdminContext로 전역 관리자 상태 관리
  - 관리자 로그인 모달 컴포넌트 추가
  - 우측 하단 플로팅 관리자 버튼 (비로그인 시)
  - 로그인 후 상단 관리자 패널 표시
  - 매물 상세페이지 플로팅 편집/삭제 버튼
- ✅ **Housing Buddy 브랜딩 완료**
  - Property Detail 페이지 헤더 "부동산 매물" → "Housing Buddy" 변경
  - 편집/삭제 버튼을 숨겨진 관리자 패널로 이동
  - AdminPanel에 현재 매물 편집/삭제 기능 추가
  - 관리자 인증 후에만 편집/삭제 가능
- ✅ **이미지 갤러리 UX 개선**
  - 썸네일 이미지 클릭 → 위쪽 큰 이미지로 변경
  - 큰 이미지 클릭 → 팝업 갤러리 열림
  - 더 직관적인 이미지 탐색 가능
- ✅ **프라이버시 강화 댓글 시스템 구현 (2025-07-11)**
  - **질문 제목 미리보기**: 댓글 내용을 제목으로만 표시, 클릭 시 상세 내용 확장
  - **접근 권한 제한**: 본인 계정으로 로그인해야만 문의 내용 및 관리자 답변 확인 가능
  - **권한 없음 메시지**: 다른 사용자가 클릭 시 "접근 권한이 없습니다" 안내 표시
  - **답변 완료 뱃지**: 관리자 답변이 있는 문의에 "답변완료" 상태 표시
  - **확장/축소 아이콘**: Eye/EyeOff 아이콘으로 직관적인 UI 제공
- ✅ **매물 상세 페이지 관리자 패널 연결 (2025-07-11)**
  - **사이드바 패널**: "관리자" 버튼 클릭 시 우측 사이드바로 관리자 패널 표시
  - **현재 매물 관리**: 현재 보고 있는 매물 편집/삭제 기능 포함
  - **전체 기능 접근**: 새 매물 등록, 휴지통, 문의 관리, 카테고리 관리 모든 기능 접근
  - **AdminPanel 컴포넌트**: trigger prop으로 커스텀 버튼 연결
- ✅ **배포 최적화 및 안정성 강화 (기존)**
  - 루트 경로(/) 헬스 체크 엔드포인트 추가로 배포 문제 해결
  - /api/health 헬스 체크 엔드포인트 유지
  - Express 서버 graceful shutdown 핸들러 구현
  - 클라우드 배포 호환성 개선

## 사용자 선호사항
- 한국어로 소통
- 간단하고 직관적인 인터페이스
- 데이터 영구 보존 중요
- 실험하기 전 백업 필요

## 프로젝트 아키텍처
- Frontend: React + TypeScript + Vite
- Backend: Express.js + Node.js
- Database: PostgreSQL (Neon)
- UI: Tailwind CSS + shadcn/ui
- State: TanStack Query + React Context
- Auth: 관리자 비밀번호 인증 (1234)

## 주요 기능
1. 매물 등록/편집/삭제
2. 구글 번역 API 연동
3. 휴지통 (소프트 삭제/복원)
4. 이미지 업로드 (붙여넣기 지원)
5. 카테고리 관리 (동적 생성)
6. 지도 연동 (Google Maps iframe)
7. 부동산 용어 툴팁
8. 댓글 시스템 (비밀번호 보호, 관리자 전용 댓글)

## 개발 환경
- Node.js + npm
- PostgreSQL 데이터베이스
- Google Translate API 키 필요